import{mode as e}from"@chakra-ui/theme-tools";import{usePopper as t,useStyles as n,useMultiStyleConfig as r,chakra as i,omitThemingProps as o,StylesProvider as l,HStack as s,Box as u,Tag as a,TagLabel as c,TagCloseButton as d,IconButton as f,forwardRef as h,Input as p}from"@chakra-ui/react";import{createContext as v,mergeRefs as m}from"@chakra-ui/react-utils";import*as g from"react";import{useRef as b,useMemo as y,useCallback as x,useEffect as S,useState as I,memo as O}from"react";import{jsx as w,jsxs as C}from"react/jsx-runtime";function _(t){return{bg:e("#fff","gray.700")(t),boxShadow:e("sm","dark-lg")(t),color:"inherit",w:"full",py:"2",zIndex:1,borderRadius:"md",borderWidth:"1px",maxH:"64",overflowY:"auto",overscrollBehaviorY:"contain"}}var z={display:"flex",flex:1,flexWrap:"wrap",alignItems:"center"},E={display:"block",textAlign:"start"};function M(t){return{cursor:"pointer",transition:"background 50ms ease-out",_focus:{bg:e("gray.50","whiteAlpha.100")(t),boxShadow:"outline"},_active:{bg:e("gray.50","whiteAlpha.100")(t)},_expanded:{bg:e("gray.50","whiteAlpha.100")(t)},_selected:{bg:e("gray.100","whiteAlpha.300")(t)},_disabled:{opacity:.4,cursor:"not-allowed"}}}function k(e){return{borderRadius:"full",variant:"solid",colorscheme:e.colorscheme}}function T(t){return{variant:"ghost",_hover:{bg:e("gray.200","whiteAlpha.300")(t)},_focus:{bg:e("gray.200","whiteAlpha.300")(t),boxShadow:"outline"},_active:{bg:e("gray.100","whiteAlpha.100")(t)},colorscheme:t.colorscheme}}var L={h:"auto",minW:72,pr:1},R={display:"flex",alignItems:"center"},P={fontWeight:"semibold"},A={display:"inline",h:"full",border:0,borderColor:"inherit",my:1,opacity:.8},V={defaultProps:{size:"md"},parts:["item","selectedItem","list","textList","selectedList","actionGroup","control","input","button","groupTitle","divider","label"],sizes:{sm:{control:{minH:8,spacing:1},input:{p:"px"},actionGroup:{spacing:"0"},list:{fontSize:"sm"},item:{py:1,px:2},textList:{py:0,px:1},selectedItem:{m:"px"},selectedList:{py:"px"},groupTitle:{mx:2,my:1,fontSize:"sm"}},md:{control:{minH:10,spacing:1},input:{p:"2px"},actionGroup:{spacing:"0"},list:{fontSize:"md"},item:{py:2,px:3},textList:{p:1},selectedItem:{m:"2px"},selectedList:{py:"2px"},groupTitle:{mx:4,my:2,fontSize:"sm"}},lg:{control:{minH:12,spacing:2},input:{p:1},actionGroup:{spacing:"0"},list:{fontSize:"lg"},item:{py:2,px:3},textList:{py:1,px:2},selectedItem:{m:1},selectedList:{py:1},groupTitle:{mx:4,my:2,fontSize:"sm"}}},baseStyle:function(e){return{list:_(e),selectedList:z,item:M(e),selectedItem:k(e),button:T(e),actionGroup:R,control:L,input:{bgColor:"transparent",appearance:"none",flex:1,outline:0},groupTitle:P,divider:A,label:E}}};function D(){return D=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},D.apply(this,arguments)}function N(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)t.indexOf(n=o[r])>=0||(i[n]=e[n]);return i}function j(e){return"object"==typeof e&&null!=e&&1===e.nodeType}function B(e,t){return(!t||"hidden"!==e)&&"visible"!==e&&"clip"!==e}function W(e,t){if(e.clientHeight<e.scrollHeight||e.clientWidth<e.scrollWidth){var n=getComputedStyle(e,null);return B(n.overflowY,t)||B(n.overflowX,t)||function(e){var t=function(e){if(!e.ownerDocument||!e.ownerDocument.defaultView)return null;try{return e.ownerDocument.defaultView.frameElement}catch(e){return null}}(e);return!!t&&(t.clientHeight<e.scrollHeight||t.clientWidth<e.scrollWidth)}(e)}return!1}function F(e,t,n,r,i,o,l,s){return o<e&&l>t||o>e&&l<t?0:o<=e&&s<=n||l>=t&&s>=n?o-e-r:l>t&&s<n||o<e&&s>n?l-t+i:0}var H,K,G=["onKeyDown"],U=["refKey","ref","onChange","onFocus","onClick","onBlur"],Y=["index","key","onClick","onMouseEnter","option"],X=["selected"];!function(e){e.SingleCreate="singleCreate",e.SingleRemove="singleRemove",e.SingleSelect="singleSelect",e.SingleClear="singleClear",e.MultiCreate="multiCreate",e.MultiRemove="multiRemove",e.MultiSelect="multiSelect",e.MultiClear="multiClear"}(H||(H={})),function(e){e.SetOpen="setOpen",e.SetSearch="setSearch",e.HighlightIndex="highlightIndex"}(K||(K={}));var q,J=[],Q=[],Z={searchValue:"",resolvedSearchValue:"",isOpen:!1,highlightedIndex:0},$=function(e,t){return t},ee=function(e,t,n,r){r.current&&function(e,t){if(e&&t){var n=function(e,t){var n=window,r=t.scrollMode,i=t.block,o=t.inline,l=t.boundary,s=t.skipOverflowHiddenElements,u="function"==typeof l?l:function(e){return e!==l};if(!j(e))throw new TypeError("Invalid target");for(var a=document.scrollingElement||document.documentElement,c=[],d=e;j(d)&&u(d);){if((d=d.parentElement)===a){c.push(d);break}null!=d&&d===document.body&&W(d)&&!W(document.documentElement)||null!=d&&W(d,s)&&c.push(d)}for(var f=n.visualViewport?n.visualViewport.width:innerWidth,h=n.visualViewport?n.visualViewport.height:innerHeight,p=window.scrollX||pageXOffset,v=window.scrollY||pageYOffset,m=e.getBoundingClientRect(),g=m.height,b=m.width,y=m.top,x=m.right,S=m.bottom,I=m.left,O="start"===i||"nearest"===i?y:"end"===i?S:y+g/2,w="center"===o?I+b/2:"end"===o?x:I,C=[],_=0;_<c.length;_++){var z=c[_],E=z.getBoundingClientRect(),M=E.height,k=E.width,T=E.top,L=E.right,R=E.bottom,P=E.left;if("if-needed"===r&&y>=0&&I>=0&&S<=h&&x<=f&&y>=T&&S<=R&&I>=P&&x<=L)return C;var A=getComputedStyle(z),V=parseInt(A.borderLeftWidth,10),D=parseInt(A.borderTopWidth,10),N=parseInt(A.borderRightWidth,10),B=parseInt(A.borderBottomWidth,10),H=0,K=0,G="offsetWidth"in z?z.offsetWidth-z.clientWidth-V-N:0,U="offsetHeight"in z?z.offsetHeight-z.clientHeight-D-B:0;if(a===z)H="start"===i?O:"end"===i?O-h:"nearest"===i?F(v,v+h,h,D,B,v+O,v+O+g,g):O-h/2,K="start"===o?w:"center"===o?w-f/2:"end"===o?w-f:F(p,p+f,f,V,N,p+w,p+w+b,b),H=Math.max(0,H+v),K=Math.max(0,K+p);else{H="start"===i?O-T-D:"end"===i?O-R+B+U:"nearest"===i?F(T,R,M,D,B+U,O,O+g,g):O-(T+M/2)+U/2,K="start"===o?w-P-V:"center"===o?w-(P+k/2)+G/2:"end"===o?w-L+N+G:F(P,L,k,V,N+G,w,w+b,b);var Y=z.scrollLeft,X=z.scrollTop;O+=X-(H=Math.max(0,Math.min(X+H,z.scrollHeight-M+U))),w+=Y-(K=Math.max(0,Math.min(Y+K,z.scrollWidth-k+G)))}C.push({el:z,top:H,left:K})}return C}(e,{boundary:t,block:"nearest",scrollMode:"if-needed"});n.forEach(function(e){var t=e.el,n=e.left;t.scrollTop=e.top,t.scrollLeft=n})}}(t.current,n.current)},te=function(e){return""+e.charAt(0).toUpperCase()+e.substring(1)},ne=function(e,t){return void 0===t&&(t=""),""+t+(null==e?void 0:e.value)},re=function(e){return"string"==typeof e?{value:e,label:te(e)}:e},ie=function(e){return e.length>1e4?1e3:e.length>1e3?200:0},oe=function(e,t,n){return e.filter(function(e){return(n(e).label||n(e).value).toString().toLowerCase().includes(t.toString().toLowerCase())}).sort(function(e){return n(e).value.toString().toLowerCase().indexOf(t.toString().toLowerCase())})};function le(e,t,n){var r,i;return n?D({},e,"function"==typeof t?((i={})[n]=t(e[n]),i):((r={})[n]=t,r)):"function"==typeof t?t(e):t}!function(e){e.List="list",e.Input="input",e.Both="both"}(q||(q={}));var se=v({strict:!1,name:"SelectContext"}),ue=se[0],ae=se[1],ce=v({strict:!1,name:"SelectInputContext"}),de=ce[0],fe=ce[1],he=v({strict:!1,name:"SelectedContext"}),pe=he[0],ve=he[1],me=v({strict:!1,name:"SelectedListContext"}),ge=me[0],be=me[1],ye=v({strict:!1,name:"SelectActionContext"}),xe=ye[0],Se=ye[1],Ie=v({strict:!1,name:"SelectIdContext"}),Oe=Ie[0],we=Ie[1];function Ce(e){var n=e.create,r=void 0!==n&&n,i=e.single,o=void 0!==i&&i,l=e.selectionVisibleIn,s=void 0===l?q.Input:l,u=e.getDebounce,a=void 0===u?ie:u,c=e.getOption,d=void 0===c?re:c,f=e.stateReducer,h=e.filterFn,p=void 0===h?oe:h,v=e.scrollToIndex,m=void 0===v?ee:v,g=e.shiftAmount,O=void 0===g?5:g,w=e.duplicates,C=e.options,_=e.value,z=e.onChange,E=e.placement,M=void 0===E?"bottom-start":E,k=e.placeholder,T=e.searchPlaceholder,L=function(e,t){var n=b();n.current=t;var r=I(e),i=r[1];return[r[0],x(function(e,t){if(!t)throw new Error("An action type is required to update the state");return i(function(r){return n.current(r,e(r),t)})},[i])]}(Z,void 0===f?$:f),R=L[0],P=R.searchValue,A=R.resolvedSearchValue,V=R.isOpen,j=R.highlightedIndex,B=L[1],W=!o,F=W&&!!(Array.isArray(_)?_.length>0:_),X=b(),te=b([]),ne=b(""),se=b(),ue=b(),ae=b({}),ce=b(),de=b(),fe=b(),he=b(j),pe=b(),ve=b(!1),me=t({placement:M});he.current=j,de.current=p,fe.current=m,ce.current=z,W&&void 0===_&&(_=J),C||(C=Q);var ge=C;C=y(function(){var e,t;return s!==q.Input?null==(e=C)?void 0:e.map(function(e){var t;return D({},d(e),{selected:null==(t=Array.isArray(_)?_:[_||""])?void 0:t.some(function(t){return d(t).value===d(e).value})})}):W&&!w?null==(t=C)?void 0:t.filter(function(e){var t;return!(null!=(t=_)&&t.some(function(t){return d(t).value===d(e).value}))}):C},[C,_,w,W,d,s]);var be=y(function(){return W?_.map(function(e){return ge.find(function(t){return d(t).value===d(e).value})||d(e)}):ge.find(function(e){return d(e).value===d(_).value})||d(_)},[W,_,ge,d]);C=y(function(){return A?null==de.current?void 0:de.current(C,A,d):C},[C,A,d]),C=y(function(){return r&&P?[D({created:!0},d(P))].concat(C):C},[r,P,C,d]),ne.current=_,te.current=C;var ye,xe=x(function(e){B(function(t){return le(t,e,"isOpen")},K.SetOpen)},[]),Se=x(function(){xe(!1)},[]),Ie=x(function(){xe(!0)},[]),Oe=function(e,t){void 0===t&&(t=0);var n=b(null),r=b();return r.current=function(e){B(function(t){return le(t,e,"resolvedSearchValue")},K.SetSearch)},S(function(){return function(){clearTimeout(n.current)}},[t]),x(function(){var e=arguments;try{return n.current&&clearTimeout(n.current),Promise.resolve(new Promise(function(i,o){n.current=setTimeout(function(){n.current=null;try{i(r.current.apply(r,[].slice.call(e)))}catch(e){o(e)}},t)}))}catch(e){return Promise.reject(e)}},[t])}(0,a(C)),we=x(function(e){B(function(t){return le(t,e,"searchValue")},K.SetSearch),Oe(e)},[]),Ce=x(function(e){var t=te.current;B(function(n){return D({},n,{highlightedIndex:Math.min(Math.max(0,"function"==typeof e?e(n.highlightedIndex):e),t.length-1)})},K.HighlightIndex)},[]),_e=x(function(e){var t=te.current[e];if(t){var n=d(t);if(W){var i=ne.current;!w&&i.some(function(e){return d(e).value===n.value})||null==ce.current||ce.current([].concat(i,[n]),{action:n.created?H.MultiCreate:H.MultiSelect,value:n})}else null==ce.current||ce.current(n.value,{action:n.created?H.SingleCreate:H.SingleSelect,value:n})}(r||W)&&we(""),W||Se()},[W,r,w,d]),ze=x(function(){null==ce.current||ce.current(W?[]:"",{action:W?H.MultiClear:H.SingleClear,value:""})},[W]),Ee=x(function(e){var t="number"==typeof e,n=Array.isArray(ne.current),r=n?ne.current:[ne.current],i=r.filter(function(n,r){return t?r!==e:d(e).value!==d(n).value});n?ce.current(i,{action:H.MultiRemove,value:d(t?r[e]:e).value}):ce.current(i[0]||"",{action:H.SingleRemove,value:d(t?r[e]:e).value})},[d]),Me=x(function(e){we(e.target.value),Ie()},[]),ke=x(function(){r&&!W||we(""),Ie()},[r,W]),Te=function(e,t){return function(n,r){var i=n.shift,o=n.meta;r.preventDefault();var l=t||o?1e12:e||i?O-1:1;Ie(),ve.current=!0,Ce(function(e){return e-l})}},Le=function(e,t){return function(n,r){var i=n.shift,o=n.meta;r.preventDefault();var l=t||o?1e12:e||i?O-1:1;Ie(),ve.current=!0,Ce(function(e){return e+l})}},Re=x(function(e,t){if(V){var n=te.current;(P||n[he.current])&&t.preventDefault(),n[he.current]&&_e(he.current)}},[V,P]),Pe=x(function(){var e=ne.current,t=W?e[e.length-1]:e;(W&&!P||!W&&t)&&(Ee(t),we(""))},[P,W]),Ae=(ye={ArrowUp:Te(),ArrowDown:Le(),PageUp:Te(!0),PageDown:Le(!0),Home:Te(!1,!0),End:Le(!1,!0),Escape:Se,Tab:Se,Enter:Re,Backspace:Pe},function(e){var t=void 0===e?{}:e,n=t.onKeyDown;return D({},N(t,G),{onKeyDown:function(e){var t=e.keyCode,r=e.key,i=ye[r]||ye[t];i&&i({keyCode:t,key:r,shift:e.shiftKey,meta:e.metaKey},e),n&&n(e)}})}),Ve=x(function(e){var t,n=void 0===e?{}:e,r=n.refKey,i=void 0===r?"ref":r,o=n.ref,l=n.onChange,s=n.onFocus,u=n.onClick,a=n.onBlur,c=N(n,U);return Ae(D(((t={})[i]=function(e){se.current=e,o&&(o.current=e)},t.value=(V?P||be.label:be?null==be?void 0:be.label:"")||"",t.placeholder=F&&!P?T:null!=be&&be.label?void 0:k,t.onChange=function(e){Me(e),l&&l(e)},t.onFocus=function(e){ke(),s&&s(e)},t.onClick=function(e){ke(),u&&u(e)},t.onBlur=function(e){a&&(e.persist(),ae.current.cb=a,ae.current.event=e)},t),c))},[V,P,be,ke,Me,k,T,F]),De=x(function(e){var t=void 0===e?{}:e,n=t.index,r=t.key,i=void 0===r?n:r,o=t.onClick,l=t.onMouseEnter,s=t.option,u=N(t,Y);if("number"!=typeof n||n<0)throw new Error("useSelect: The getOptionProps prop getter requires an index property, eg. 'getOptionProps({index: 1})'");return D({key:i,option:s},u,{onClick:function(e){void 0!==s.selected&&s.selected?Ee(s.value):_e(n),o&&o(e)},onMouseEnter:function(e){ve.current=!1,Ce(n),l&&l(e)}})},[]);return function(e,t,n,r){var i=b(),o=b(),l=b();l.current=t;var s=n||i,u=r||o,a=x(function(e){if("click"!==e.type||"touchstart"!==e.type){var t=u.current,n=s.current;null!=t&&t.contains(e.target)||null!=n&&n.contains(e.target)||l.current(e)}},[]);S(function(){return e&&(document.addEventListener("touchstart",a,!0),document.addEventListener("click",a,!0)),function(){document.removeEventListener("touchstart",a,!0),document.removeEventListener("click",a,!0)}},[e,a])}(V,Se,X,ue),S(function(){P&&Ce(0)},[P,Ce]),S(function(){var e,t;Ce(0),!V&&null!=(e=ae.current)&&e.event&&(null==(t=ae.current)||t.cb(ae.current.event),ae.current.event=null)},[V]),S(function(){null==fe.current||fe.current(j,pe,X,ve)},[j]),S(function(){V&&se.current&&setTimeout(function(){var e;null==(e=se.current)||e.focus()})},[V]),{multi:W,clearable:F,clearAll:ze,optionsRef:X,controlRef:ue,popper:me,value:_,searchValue:P,isOpen:V,highlightedIndexRef:he,highlightedValueRef:pe,enableScrollRef:ve,selectedOption:be,visibleOptions:C,selectionVisibleIn:s,selectIndex:_e,removeValue:Ee,setOpen:xe,setSearch:we,highlightIndex:Ce,getInputProps:Ve,getOptionProps:De,getOption:d}}function _e(e){void 0===e&&(e={});var t=Se(),r=t.clearAll,i=t.clearable,o=n(),l=x(function(e){e.preventDefault(),e.stopPropagation(),r()},[]);return D({},e,{clearOnClick:l,clearable:i,__css:o.actionGroup})}function ze(e){void 0===e&&(e={});var t=we(),i=t.selectLabelId,o=t.selectInputId,l=fe().getInputProps,s=(r("Input",e).field||{}).fontSize,u=n();return D({},e,l(),{__css:D({fontSize:s},u.input),id:o,"aria-labelledby":i})}function Ee(e){void 0===e&&(e={});var t=we(),i=t.selectLabelId,o=t.selectInputId;return D({},e,{__css:D({},r("FormLabel",e)||{},n().label),id:i,htmlFor:o})}function Me(e){var t;void 0===e&&(e={});var r=Se(),i=r.isOpen,o=r.setOpen,l=x(function(e){e.preventDefault(),e.stopPropagation(),o(function(e){return!e})},[o]),s=n();return D({},e,{__css:D({},s.button,null==(t=i&&s.button)?void 0:t._active),isOpen:i,onClick:l})}function ke(e){return void 0===e&&(e={}),D({},e,{__css:D({},n().button)})}function Te(e){void 0===e&&(e={});var t=ve().removeValue,r=n(),i=x(function(){return t(e.value)},[e.value]);return y(function(){return{key:e.key||e.value,onClick:i,__css:r.selectedItem,value:e.value,label:e.label||te(e.value)}},[e.value,e.label,e.key,i,r.selectedItem])}function Le(e){var t=void 0===e?{}:e,r=t.selected,i=N(t,X),o=ae(),l=o.getOptionProps,s=o.highlightedIndexRef,u=o.highlightedValueRef,a=o.multi,c=n(),d=s.current===i.index;return y(function(){var e,t,n={value:i.value,label:i.label||te(i.value),selected:r};return D({},l({option:n,key:i.key||ne(n),index:i.index}),{multi:a,highlightedRef:d?u:void 0,__css:D({},c.item,null==(e=r&&c.item)?void 0:e._selected,null==(t=d&&c.item)?void 0:t._active)})},[d,r,i.key,i.label,i.value,i.index,c.item,a])}function Re(){var e=ae(),t=e.isOpen,r=e.getOption,i=e.optionsRef,o=e.popper,l=e.visibleOptions,s=e.multi,u=n();return y(function(){return{ref:m(i,o.popperRef),optionsRef:i,isOpen:t,visibleOptions:l,getOption:r,__css:u.list,"aria-multiselectable":s,"aria-hidden":!t}},[t,l,u.list,s])}function Pe(e){void 0===e&&(e={});var t=ae(),r=t.visibleOptions,i=t.getOption,o=be(),l=o.value,s=o.multi,u=o.selectionVisibleIn,a=n();return D({},e,{multi:s,selectedItems:y(function(){return l&&Array.isArray(l)?l.map(function(e){return i(e)}):[]},[l,r]),selectionVisibleIn:u,__css:a.selectedList,textList:{__css:a.textList}})}function Ae(e){var t;void 0===e&&(e={});var i=ae(),o=i.isOpen,l=i.popper,s=i.controlRef,u=r("Input",e)||{},a=n();return D({},e,y(function(){return{ref:m(e.ref,s,l.referenceRef)}},[e.ref,s,l.referenceRef]),{isOpen:o,__css:D({},a.field,a.control,{_focusWithin:null==(t=u.field)?void 0:t._focusVisible})})}var Ve=function(e){void 0===e&&(e=21);for(var t="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ-_",n="",r=0;r<e;r++)n+=t[Math.floor(Math.random()*t.length)];return n};function De(){var e=b();return e.current||(e.current=Ve()),e.current}function Ne(e){void 0===e&&(e={});var t=e.getOption||re,n=I(e.value),r=n[0],i=n[1],o=I(function(){return e.options.map(t)}),l=o[1];return{value:r,options:o[0],onChange:x(function(e,n){switch(null==n?void 0:n.action){case H.SingleCreate:i(e),l(function(n){var r=t(e);return n.some(function(e){return t(e).value===r.value})?n:[D({},r,{created:!0})].concat(n)});break;case H.SingleClear:case H.SingleRemove:case H.SingleSelect:i(e);break;case H.MultiCreate:var r=e[e.length-1];i(e),l(function(e){var n=t(r);return e.some(function(e){return t(e).value===n.value})?e:[D({},n,{created:!0})].concat(e)});break;default:i(e)}},[i,l,t])}}function je(){return je=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},je.apply(this,arguments)}function Be(){return Be=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Be.apply(this,arguments)}function We(e,t,n){var r,i,o=null!=(r=n.initialDeps)?r:[];return function(){var r;n.key&&null!=n.debug&&n.debug()&&(r=Date.now());var l,s=e();if(s.length===o.length&&!s.some(function(e,t){return o[t]!==e}))return i;if(o=s,n.key&&null!=n.debug&&n.debug()&&(l=Date.now()),i=t.apply(void 0,s),n.key&&null!=n.debug&&n.debug()){var u=Math.round(100*(Date.now()-r))/100,a=Math.round(100*(Date.now()-l))/100,c=a/16,d=function(e,t){for(e=String(e);e.length<t;)e=" "+e;return e};console.info("%c⏱ "+d(a,5)+" /"+d(u,5)+" ms","\n            font-size: .6rem;\n            font-weight: bold;\n            color: hsl("+Math.max(0,Math.min(120-120*c,120))+"deg 100% 31%);",null==n?void 0:n.key)}return null==n||null==n.onChange||n.onChange(i),i}}function Fe(e,t){if(void 0===e)throw new Error("Unexpected undefined"+(t?": "+t:""));return e}var He=function(e){return e},Ke=function(e){for(var t=Math.max(e.startIndex-e.overscan,0),n=Math.min(e.endIndex+e.overscan,e.count-1),r=[],i=t;i<=n;i++)r.push(i);return r},Ge=function(e,t){var n=e.scrollElement;if(n){var r=function(e){var n=e.height;t({width:Math.round(e.width),height:Math.round(n)})};r(n.getBoundingClientRect());var i=new ResizeObserver(function(e){var t=e[0];if(null!=t&&t.borderBoxSize){var i=t.borderBoxSize[0];if(i)return void r({width:i.inlineSize,height:i.blockSize})}r(n.getBoundingClientRect())});return i.observe(n,{box:"border-box"}),function(){i.unobserve(n)}}},Ue=function(e,t){var n=e.scrollElement;if(n){var r=function(){t(n[e.options.horizontal?"scrollLeft":"scrollTop"])};return r(),n.addEventListener("scroll",r,{passive:!0}),function(){n.removeEventListener("scroll",r)}}},Ye=function(e,t,n){if(null!=t&&t.borderBoxSize){var r=t.borderBoxSize[0];if(r)return Math.round(r[n.options.horizontal?"inlineSize":"blockSize"])}return Math.round(e.getBoundingClientRect()[n.options.horizontal?"width":"height"])},Xe=function(e,t,n){var r,i,o=t.adjustments,l=t.behavior;null==(r=n.scrollElement)||null==r.scrollTo||r.scrollTo(((i={})[n.options.horizontal?"left":"top"]=e+(void 0===o?0:o),i.behavior=l,i))},qe=function(e){var t,n,r=this;this.unsubs=[],this.scrollElement=null,this.isScrolling=!1,this.isScrollingTimeoutId=null,this.scrollToIndexTimeoutId=null,this.measurementsCache=[],this.itemSizeCache=new Map,this.pendingMeasuredCacheIndexes=[],this.scrollDirection=null,this.scrollAdjustments=0,this.measureElementCache=new Map,this.observer=(t=null,n=function(){return t||("undefined"!=typeof ResizeObserver?t=new ResizeObserver(function(e){e.forEach(function(e){r._measureElement(e.target,e)})}):null)},{disconnect:function(){var e;return null==(e=n())?void 0:e.disconnect()},observe:function(e){var t;return null==(t=n())?void 0:t.observe(e,{box:"border-box"})},unobserve:function(e){var t;return null==(t=n())?void 0:t.unobserve(e)}}),this.range={startIndex:0,endIndex:0},this.setOptions=function(e){Object.entries(e).forEach(function(t){void 0===t[1]&&delete e[t[0]]}),r.options=Be({debug:!1,initialOffset:0,overscan:1,paddingStart:0,paddingEnd:0,scrollPaddingStart:0,scrollPaddingEnd:0,horizontal:!1,getItemKey:He,rangeExtractor:Ke,onChange:function(){},measureElement:Ye,initialRect:{width:0,height:0},scrollMargin:0,scrollingDelay:150,indexAttribute:"data-index",initialMeasurementsCache:[],lanes:1},e)},this.notify=function(){null==r.options.onChange||r.options.onChange(r)},this.cleanup=function(){r.unsubs.filter(Boolean).forEach(function(e){return e()}),r.unsubs=[],r.scrollElement=null},this._didMount=function(){return r.measureElementCache.forEach(r.observer.observe),function(){r.observer.disconnect(),r.cleanup()}},this._willUpdate=function(){var e=r.options.getScrollElement();r.scrollElement!==e&&(r.cleanup(),r.scrollElement=e,r._scrollToOffset(r.scrollOffset,{adjustments:void 0,behavior:void 0}),r.unsubs.push(r.options.observeElementRect(r,function(e){var t=r.scrollRect;r.scrollRect=e,(r.options.horizontal?e.width!==t.width:e.height!==t.height)&&r.maybeNotify()})),r.unsubs.push(r.options.observeElementOffset(r,function(e){r.scrollAdjustments=0,r.scrollOffset!==e&&(null!==r.isScrollingTimeoutId&&(clearTimeout(r.isScrollingTimeoutId),r.isScrollingTimeoutId=null),r.isScrolling=!0,r.scrollDirection=r.scrollOffset<e?"forward":"backward",r.scrollOffset=e,r.maybeNotify(),r.isScrollingTimeoutId=setTimeout(function(){r.isScrollingTimeoutId=null,r.isScrolling=!1,r.scrollDirection=null,r.maybeNotify()},r.options.scrollingDelay))})))},this.getSize=function(){return r.scrollRect[r.options.horizontal?"width":"height"]},this.memoOptions=We(function(){return[r.options.count,r.options.paddingStart,r.options.scrollMargin,r.options.getItemKey]},function(e,t,n,i){return r.pendingMeasuredCacheIndexes=[],{count:e,paddingStart:t,scrollMargin:n,getItemKey:i}},{key:!1}),this.getFurthestMeasurement=function(e,t){for(var n=new Map,i=new Map,o=t-1;o>=0;o--){var l=e[o];if(!n.has(l.lane)){var s=i.get(l.lane);if(null==s||l.end>s.end?i.set(l.lane,l):l.end<s.end&&n.set(l.lane,!0),n.size===r.options.lanes)break}}return i.size===r.options.lanes?Array.from(i.values()).sort(function(e,t){return e.end-t.end})[0]:void 0},this.getMeasurements=We(function(){return[r.memoOptions(),r.itemSizeCache]},function(e,t){var n=e.count,i=e.paddingStart,o=e.scrollMargin,l=e.getItemKey,s=r.pendingMeasuredCacheIndexes.length>0?Math.min.apply(Math,r.pendingMeasuredCacheIndexes):0;r.pendingMeasuredCacheIndexes=[];for(var u=r.measurementsCache.slice(0,s),a=s;a<n;a++){var c=l(a),d=1===r.options.lanes?u[a-1]:r.getFurthestMeasurement(u,a),f=d?d.end:i+o,h=t.get(c),p="number"==typeof h?h:r.options.estimateSize(a);u[a]={index:a,start:f,size:p,end:f+p,key:c,lane:d?d.lane:a%r.options.lanes}}return r.measurementsCache=u,u},{key:"production"!==process.env.NODE_ENV&&"getMeasurements",debug:function(){return r.options.debug}}),this.calculateRange=We(function(){return[r.getMeasurements(),r.getSize(),r.scrollOffset]},function(e,t,n){return r.range=function(e){for(var t=e.measurements,n=e.outerSize,r=e.scrollOffset,i=t.length-1,o=Je(0,i,function(e){return t[e].start},r),l=o;l<i&&t[l].end<r+n;)l++;return{startIndex:o,endIndex:l}}({measurements:e,outerSize:t,scrollOffset:n})},{key:"production"!==process.env.NODE_ENV&&"calculateRange",debug:function(){return r.options.debug}}),this.maybeNotify=We(function(){var e=r.calculateRange();return[e.startIndex,e.endIndex,r.isScrolling]},function(){r.notify()},{key:"production"!==process.env.NODE_ENV&&"maybeNotify",debug:function(){return r.options.debug},initialDeps:[this.range.startIndex,this.range.endIndex,this.isScrolling]}),this.getIndexes=We(function(){return[r.options.rangeExtractor,r.calculateRange(),r.options.overscan,r.options.count]},function(e,t,n,r){return e(Be({},t,{overscan:n,count:r}))},{key:"production"!==process.env.NODE_ENV&&"getIndexes",debug:function(){return r.options.debug}}),this.indexFromElement=function(e){var t=r.options.indexAttribute,n=e.getAttribute(t);return n?parseInt(n,10):(console.warn("Missing attribute name '"+t+"={index}' on measured element."),-1)},this._measureElement=function(e,t){var n,i=r.indexFromElement(e),o=r.measurementsCache[i];if(o){var l=r.measureElementCache.get(o.key);if(!e.isConnected)return r.observer.unobserve(e),void(e===l&&r.measureElementCache.delete(o.key));l!==e&&(l&&r.observer.unobserve(l),r.observer.observe(e),r.measureElementCache.set(o.key,e));var s=r.options.measureElement(e,t,r),u=s-(null!=(n=r.itemSizeCache.get(o.key))?n:o.size);0!==u&&(o.start<r.scrollOffset&&("production"!==process.env.NODE_ENV&&r.options.debug&&console.info("correction",u),r._scrollToOffset(r.scrollOffset,{adjustments:r.scrollAdjustments+=u,behavior:void 0})),r.pendingMeasuredCacheIndexes.push(i),r.itemSizeCache=new Map(r.itemSizeCache.set(o.key,s)),r.notify())}},this.measureElement=function(e){e&&r._measureElement(e,void 0)},this.getVirtualItems=We(function(){return[r.getIndexes(),r.getMeasurements()]},function(e,t){for(var n=[],r=0,i=e.length;r<i;r++)n.push(t[e[r]]);return n},{key:"production"!==process.env.NODE_ENV&&"getIndexes",debug:function(){return r.options.debug}}),this.getVirtualItemForOffset=function(e){var t=r.getMeasurements();return Fe(t[Je(0,t.length-1,function(e){return Fe(t[e]).start},e)])},this.getOffsetForAlignment=function(e,t){var n=r.getSize();"auto"===t&&(t=e<=r.scrollOffset?"start":e>=r.scrollOffset+n?"end":"start"),"start"===t||("end"===t?e-=n:"center"===t&&(e-=n/2));var i=r.options.horizontal?"scrollWidth":"scrollHeight",o=(r.scrollElement?"document"in r.scrollElement?r.scrollElement.document.documentElement[i]:r.scrollElement[i]:0)-r.getSize();return Math.max(Math.min(o,e),0)},this.getOffsetForIndex=function(e,t){void 0===t&&(t="auto"),e=Math.max(0,Math.min(e,r.options.count-1));var n=Fe(r.getMeasurements()[e]);if("auto"===t)if(n.end>=r.scrollOffset+r.getSize()-r.options.scrollPaddingEnd)t="end";else{if(!(n.start<=r.scrollOffset+r.options.scrollPaddingStart))return[r.scrollOffset,t];t="start"}return[r.getOffsetForAlignment("end"===t?n.end+r.options.scrollPaddingEnd:n.start-r.options.scrollPaddingStart,t),t]},this.isDynamicMode=function(){return r.measureElementCache.size>0},this.cancelScrollToIndex=function(){null!==r.scrollToIndexTimeoutId&&(clearTimeout(r.scrollToIndexTimeoutId),r.scrollToIndexTimeoutId=null)},this.scrollToOffset=function(e,t){var n=void 0===t?{}:t,i=n.align,o=void 0===i?"start":i,l=n.behavior;r.cancelScrollToIndex(),"smooth"===l&&r.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),r._scrollToOffset(r.getOffsetForAlignment(e,o),{adjustments:void 0,behavior:l})},this.scrollToIndex=function(e,t){var n=void 0===t?{}:t,i=n.align,o=void 0===i?"auto":i,l=n.behavior;e=Math.max(0,Math.min(e,r.options.count-1)),r.cancelScrollToIndex(),"smooth"===l&&r.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size.");var s=r.getOffsetForIndex(e,o),u=s[1];r._scrollToOffset(s[0],{adjustments:void 0,behavior:l}),"smooth"!==l&&r.isDynamicMode()&&(r.scrollToIndexTimeoutId=setTimeout(function(){if(r.scrollToIndexTimeoutId=null,r.measureElementCache.has(r.options.getItemKey(e))){var t=r.getOffsetForIndex(e,u);Math.abs(t[0]-r.scrollOffset)<1||r.scrollToIndex(e,{align:u,behavior:l})}else r.scrollToIndex(e,{align:u,behavior:l})}))},this.scrollBy=function(e,t){var n=(void 0===t?{}:t).behavior;r.cancelScrollToIndex(),"smooth"===n&&r.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),r._scrollToOffset(r.scrollOffset+e,{adjustments:void 0,behavior:n})},this.getTotalSize=function(){var e;return((null==(e=r.getMeasurements()[r.options.count-1])?void 0:e.end)||r.options.paddingStart)-r.options.scrollMargin+r.options.paddingEnd},this._scrollToOffset=function(e,t){r.options.scrollToFn(e,{behavior:t.behavior,adjustments:t.adjustments},r)},this.measure=function(){r.itemSizeCache=new Map,r.notify()},this.setOptions(e),this.scrollRect=this.options.initialRect,this.scrollOffset=this.options.initialOffset,this.measurementsCache=this.options.initialMeasurementsCache,this.measurementsCache.forEach(function(e){r.itemSizeCache.set(e.key,e.size)}),this.maybeNotify()},Je=function(e,t,n,r){for(;e<=t;){var i=(e+t)/2|0,o=n(i);if(o<r)e=i+1;else{if(!(o>r))return i;t=i-1}}return e>0?e-1:0},Qe="undefined"!=typeof document?g.useLayoutEffect:g.useEffect,Ze=["value","label","index","selected","created"],$e=["highlightedRef","option","multi"],et=["index","size","start","item","optionItemProps"],tt=["__css","visibleOptions","isOpen","getOption","ref","optionsRef"],nt=["isActive","width","height","__css"],rt=["width","height"],it=["value","label"],ot=["onClick","__css","value","label"],lt=["__css","size","ariaLabel","icon","isOpen"],st=["__css","size","ariaLabel","icon"],ut=["children"],at=["__css","textList","selectedItems","multi","selectionVisibleIn"],ct=["__css","clearable","clearOnClick","clearButtonProps","toggleButtonProps"],dt=["children"],ft=["label","labelProps","controlProps","listProps","selectedListProps","actionGroupProps","size"],ht=i("svg"),pt=O(function(e){var t=e.children,n=r("MultiSelect",e),s=o(e),u=De(),a=De(),c=y(function(){return{selectLabelId:u,selectInputId:a}},[]),d=Ce(s),f=y(function(){return d},[d]),h=y(function(){return{getInputProps:d.getInputProps}},[d.getInputProps]),p=y(function(){return{removeValue:d.removeValue}},[d.removeValue]),v=y(function(){return{value:d.value,multi:d.multi,selectionVisibleIn:d.selectionVisibleIn}},[d.value,d.multi,d.selectionVisibleIn]),m=y(function(){return{isOpen:d.isOpen,setOpen:d.setOpen,clearable:d.clearable,clearAll:d.clearAll}},[d.isOpen,d.setOpen,d.clearable,d.clearAll]);return w(l,{value:n,children:w(Oe,{value:c,children:w(ue,{value:f,children:w(de,{value:h,children:w(ge,{value:v,children:w(pe,{value:p,children:w(xe,{value:m,children:w(i.div,{pos:"relative",display:"flex",flexDirection:"column",children:t})})})})})})})})});pt.displayName="Select";var vt=O(function(e){var t=Ee(e);return w(i.label,D({},e,t))});vt.displayName="SelectLabel";var mt=O(function(e){var t=e.created;return C(s,{justifyContent:"space-between",w:"full",children:[w(u,{children:e.label}),!!t&&w(a,{flexShrink:0,children:w(c,{fontSize:"xs",fontWeight:"bold",children:"New"})})]})});mt.displayName="SelectOptionLabel";var gt=O(function(e){var t=e.value,n=e.label,r=e.index,o=e.selected,l=e.created,s=N(e,Ze),u=Le({value:t,label:n,index:r,selected:o}),a=u.highlightedRef,c=u.option,d=u.multi,f=N(u,$e);return w(i.li,D({ref:a&&a,role:"option"},(o||d)&&{"aria-selected":!!o},s,f,{children:w(mt,{label:(null==c?void 0:c.label)||t,created:!!l})}))});gt.displayName="SelectOptionItem";var bt=O(function(e){var t=e.index,n=e.size,r=e.start,i=e.item,o=e.optionItemProps,l=N(e,et);return w(gt,D({},o(i.value,t),{style:{position:"absolute",top:0,left:0,width:"100%",height:n+"px",transform:"translateY("+r+"px)"},selected:i.selected,created:i.created,label:i.label},l))});bt.displayName="SelectOptionVirtualItem";var yt=O(function(e){var t=e.label,r=void 0===t?"No results found":t,o=n();return w(i.li,{__css:o.item,children:w(mt,{label:r})})});yt.displayName="EmptySelectResults";var xt=O(function(e){var t,n,r,o,l=Re(),s=l.__css,u=l.visibleOptions,a=l.isOpen,c=l.getOption,d=l.ref,f=l.optionsRef,h=N(l,tt),p=a,v=x(function(e,t){var n=c(e);return{key:n.id||ne(n,"option-"),value:n.value,label:n.label||te(n.value),selected:n.selected,created:n.created,index:t}},[]),m=y(function(){return"lg"===e.size?43:"sm"===e.size?29:40},[e.size]),b=(t=je({observeElementRect:Ge,observeElementOffset:Ue,scrollToFn:Xe},{count:u.length,getScrollElement:function(){return f.current},estimateSize:function(){return m}}),n=g.useReducer(function(){return{}},{})[1],r=je({},t,{onChange:function(e){n(),null==t.onChange||t.onChange(e)}}),(o=g.useState(function(){return new qe(r)})[0]).setOptions(r),g.useEffect(function(){return o._didMount()},[]),Qe(function(){return o._willUpdate()}),o);return w(i.ul,D({ref:d,__css:y(function(){return D({listStyle:"none",position:"absolute"},!p&&{display:"none"},s)},[p,s]),"aria-orientation":"vertical",role:"listbox"},h,e,{children:p&&u.length>0?w("div",{style:{height:b.getTotalSize()+"px",width:"100%",position:"relative"},children:b.getVirtualItems().map(function(e){return w(bt,{optionItemProps:v,item:u[e.index],index:e.index,size:e.size,start:e.start},e.key)})}):p?w(yt,{}):null}))});xt.displayName="SelectList";var St=function(e){var t=e.isActive,n=e.width,r=void 0===n?4:n,i=e.height,o=void 0===i?4:i,l=e.__css,s=N(e,nt);return w(ht,D({viewBox:"0 0 24 24",stroke:"currentColor",fill:"none",width:r,height:o,__css:D({},l,t&&(null==l?void 0:l._active))},s,{children:w("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 9l-7 7-7-7"})}))},It=function(e){var t=e.width,n=void 0===t?4:t,r=e.height,i=void 0===r?4:r,o=N(e,rt);return w(ht,D({viewBox:"0 0 24 24",stroke:"currentColor",fill:"none",width:n,height:i},o,{children:w("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z"})}))},Ot=O(function(e){var t=ze(e);return w(i.input,D({},t))});Ot.displayName="SelectInput";var wt=O(function(e){var t=e.value,n=e.label,r=N(e,it),i=Te(D({value:t,label:n||"",key:r.key||""},r)),o=i.onClick,l=i.__css,s=i.value,u=i.label,f=N(i,ot);return C(a,D({size:r.size},{sm:{fontSize:"sm"},md:{fontSize:"md"},lg:{fontSize:"lg"}}[r.size||"md"]||{},l,f,{role:"listitem",children:[w(c,{children:u||s}),w(d,{onClick:o})]}))});wt.displayName="SelectedItem";var Ct=O(function(e){var t=Me(e),n=t.__css,r=t.size,i=void 0===r?"sm":r,o=t.ariaLabel,l=void 0===o?"toggle menu":o,s=t.icon,u=void 0===s?St:s,a=t.isOpen,c=N(t,lt),d={sm:{height:"6",width:"6"},md:{height:"8",width:"8"},lg:{height:"10",width:"10"}}[i]||{};return w(f,D({tabIndex:0,size:i,"aria-label":l,"aria-haspopup":!0,"aria-expanded":a,icon:w(u,{isActive:a,__css:{transitionDuration:"200ms",transitionProperty:"transform",_active:{transform:"rotate(180deg)"}}}),minWidth:0},d,n,c))});Ct.displayName="SelectToggleButton";var _t=O(function(e){var t=ke(e),n=t.__css,r=t.size,i=void 0===r?"sm":r,o=t.ariaLabel,l=void 0===o?"clear all selected":o,s=t.icon,u=void 0===s?It:s,a=N(t,st),c={sm:{height:"6",width:"6"},md:{height:"8",width:"8"},lg:{height:"10",width:"10"}}[i]||{};return w(f,D({tabIndex:0,size:i,"aria-label":l,icon:w(u,{}),minWidth:0},c,n,a))});_t.displayName="SelectClearButton";var zt=O(function(e){var t=e.children,n=N(e,ut),r=Pe(n),i=r.__css,o=r.textList,l=r.selectedItems,s=r.multi,a=r.selectionVisibleIn,c=N(r,at),d=s&&a!==q.List,f=s&&a===q.List;return C(u,D({},i,c,d?{role:"list"}:null,{children:[d&&(null==l?void 0:l.map(function(e){return w(wt,{size:n.size,value:e.value,label:e.label},"selected-item-"+e.value)})),f&&!(null==l||!l.length)&&w(u,D({"aria-current":"true"},null==o?void 0:o.__css,{children:null==l?void 0:l.map(function(e){return e.label}).join(", ")})),t]}))});zt.displayName="SelectedList";var Et=O(function(e){var t=_e(e),n=t.__css,r=t.clearable,i=t.clearOnClick,o=t.clearButtonProps,l=t.toggleButtonProps,u=N(t,ct);return C(s,D({},n,u,{children:[r&&w(_t,D({size:e.size,onClick:i},o)),w(Ct,D({size:e.size},l))]}))});Et.displayName="SelectActionGroup";var Mt=h(function(e,t){var n=e.children,r=N(e,dt),i=Ae({ref:t});return w(p,D({ref:i.ref,as:s},i.__css,r,{children:n}))}),kt=function(e){var t=e.label,n=e.labelProps,r=e.controlProps,i=e.listProps,o=e.selectedListProps,l=e.actionGroupProps,s=e.size,u=void 0===s?"md":s,a=N(e,ft);return C(pt,D({size:u},a,{children:[t&&w(vt,D({size:u},n,{children:t})),C(Mt,D({size:u},r,{children:[w(zt,D({size:u},o,{children:w(Ot,{size:u})})),w(Et,D({size:u},l))]})),w(xt,D({size:u},i))]}))};export{ht as ChakraSvg,H as ChangeActions,yt as EmptySelectResults,kt as MultiSelect,V as MultiSelectTheme,pt as Select,Et as SelectActionGroup,xe as SelectActionProvider,K as SelectActions,_t as SelectClearButton,Mt as SelectControl,Oe as SelectIdProvider,Ot as SelectInput,de as SelectInputProvider,vt as SelectLabel,xt as SelectList,gt as SelectOptionItem,mt as SelectOptionLabel,bt as SelectOptionVirtualItem,ue as SelectProvider,Ct as SelectToggleButton,wt as SelectedItem,zt as SelectedList,ge as SelectedListProvider,pe as SelectedProvider,q as SelectionVisibilityMode,ne as idFromOption,te as labelFromValue,Ve as uid,ke as useClearButton,De as useId,Ne as useMultiSelect,Ce as useSelect,Se as useSelectActionContext,_e as useSelectActionGroup,Me as useSelectButton,ae as useSelectContext,Ae as useSelectControl,we as useSelectIdContext,ze as useSelectInput,fe as useSelectInputContext,Le as useSelectItem,Ee as useSelectLabel,Re as useSelectList,ve as useSelectedContext,Te as useSelectedItem,Pe as useSelectedList,be as useSelectedListContext};
//# sourceMappingURL=index.module.mjs.map
