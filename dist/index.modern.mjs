import{mode as e}from"@chakra-ui/theme-tools";import{usePopper as t,useStyles as n,useMultiStyleConfig as r,chakra as i,omitThemingProps as o,StylesProvider as l,HStack as s,Box as a,Tag as c,TagLabel as u,TagCloseButton as d,IconButton as h,forwardRef as p,Input as f}from"@chakra-ui/react";import{createContext as m,mergeRefs as g}from"@chakra-ui/react-utils";import*as v from"react";import{useRef as b,useMemo as y,useCallback as x,useEffect as S,useState as I,memo as O}from"react";import{jsx as w,jsxs as C}from"react/jsx-runtime";function _(t){return{bg:e("#fff","gray.700")(t),boxShadow:e("sm","dark-lg")(t),color:"inherit",w:"full",py:"2",zIndex:1,borderRadius:"md",borderWidth:"1px",maxH:"64",overflowY:"auto",overscrollBehaviorY:"contain"}}const z={display:"flex",flex:1,flexWrap:"wrap",alignItems:"center"},E={display:"block",textAlign:"start"};function M(t){return{cursor:"pointer",transition:"background 50ms ease-out",_focus:{bg:e("gray.50","whiteAlpha.100")(t),boxShadow:"outline"},_active:{bg:e("gray.50","whiteAlpha.100")(t)},_expanded:{bg:e("gray.50","whiteAlpha.100")(t)},_selected:{bg:e("gray.100","whiteAlpha.300")(t)},_disabled:{opacity:.4,cursor:"not-allowed"}}}function k(e){return{borderRadius:"full",variant:"solid",colorscheme:e.colorscheme}}function T(t){return{variant:"ghost",_hover:{bg:e("gray.200","whiteAlpha.300")(t)},_focus:{bg:e("gray.200","whiteAlpha.300")(t),boxShadow:"outline"},_active:{bg:e("gray.100","whiteAlpha.100")(t)},colorscheme:t.colorscheme}}const L={h:"auto",minW:72,pr:1},R={display:"flex",alignItems:"center"},P={fontWeight:"semibold"},A={display:"inline",h:"full",border:0,borderColor:"inherit",my:1,opacity:.8};var V={defaultProps:{size:"md"},parts:["item","selectedItem","list","textList","selectedList","actionGroup","control","input","button","groupTitle","divider","label"],sizes:{sm:{control:{minH:8,spacing:1},input:{p:"px"},actionGroup:{spacing:"0"},list:{fontSize:"sm"},item:{py:1,px:2},textList:{py:0,px:1},selectedItem:{m:"px"},selectedList:{py:"px"},groupTitle:{mx:2,my:1,fontSize:"sm"}},md:{control:{minH:10,spacing:1},input:{p:"2px"},actionGroup:{spacing:"0"},list:{fontSize:"md"},item:{py:2,px:3},textList:{p:1},selectedItem:{m:"2px"},selectedList:{py:"2px"},groupTitle:{mx:4,my:2,fontSize:"sm"}},lg:{control:{minH:12,spacing:2},input:{p:1},actionGroup:{spacing:"0"},list:{fontSize:"lg"},item:{py:2,px:3},textList:{py:1,px:2},selectedItem:{m:1},selectedList:{py:1},groupTitle:{mx:4,my:2,fontSize:"sm"}}},baseStyle:e=>({list:_(e),selectedList:z,item:M(e),selectedItem:k(e),button:T(e),actionGroup:R,control:L,input:{bgColor:"transparent",appearance:"none",flex:1,outline:0},groupTitle:P,divider:A,label:E})};function D(){return D=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},D.apply(this,arguments)}function N(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)t.indexOf(n=o[r])>=0||(i[n]=e[n]);return i}function j(e){return"object"==typeof e&&null!=e&&1===e.nodeType}function B(e,t){return(!t||"hidden"!==e)&&"visible"!==e&&"clip"!==e}function W(e,t){if(e.clientHeight<e.scrollHeight||e.clientWidth<e.scrollWidth){var n=getComputedStyle(e,null);return B(n.overflowY,t)||B(n.overflowX,t)||function(e){var t=function(e){if(!e.ownerDocument||!e.ownerDocument.defaultView)return null;try{return e.ownerDocument.defaultView.frameElement}catch(e){return null}}(e);return!!t&&(t.clientHeight<e.scrollHeight||t.clientWidth<e.scrollWidth)}(e)}return!1}function F(e,t,n,r,i,o,l,s){return o<e&&l>t||o>e&&l<t?0:o<=e&&s<=n||l>=t&&s>=n?o-e-r:l>t&&s<n||o<e&&s>n?l-t+i:0}const H=["onKeyDown"],K=["refKey","ref","onChange","onFocus","onClick","onBlur"],G=["index","key","onClick","onMouseEnter","option"],$=["selected"];var U,Y;!function(e){e.SingleCreate="singleCreate",e.SingleRemove="singleRemove",e.SingleSelect="singleSelect",e.SingleClear="singleClear",e.MultiCreate="multiCreate",e.MultiRemove="multiRemove",e.MultiSelect="multiSelect",e.MultiClear="multiClear"}(U||(U={})),function(e){e.SetOpen="setOpen",e.SetSearch="setSearch",e.HighlightIndex="highlightIndex"}(Y||(Y={}));const X=[],q=[],J={searchValue:"",resolvedSearchValue:"",isOpen:!1,highlightedIndex:0},Q=(e,t)=>t,Z=(e,t,n,r)=>{r.current&&function(e,t){if(!e||!t)return;const n=function(e,t){var n=window,r=t.scrollMode,i=t.block,o=t.inline,l=t.boundary,s=t.skipOverflowHiddenElements,a="function"==typeof l?l:function(e){return e!==l};if(!j(e))throw new TypeError("Invalid target");for(var c=document.scrollingElement||document.documentElement,u=[],d=e;j(d)&&a(d);){if((d=d.parentElement)===c){u.push(d);break}null!=d&&d===document.body&&W(d)&&!W(document.documentElement)||null!=d&&W(d,s)&&u.push(d)}for(var h=n.visualViewport?n.visualViewport.width:innerWidth,p=n.visualViewport?n.visualViewport.height:innerHeight,f=window.scrollX||pageXOffset,m=window.scrollY||pageYOffset,g=e.getBoundingClientRect(),v=g.height,b=g.width,y=g.top,x=g.right,S=g.bottom,I=g.left,O="start"===i||"nearest"===i?y:"end"===i?S:y+v/2,w="center"===o?I+b/2:"end"===o?x:I,C=[],_=0;_<u.length;_++){var z=u[_],E=z.getBoundingClientRect(),M=E.height,k=E.width,T=E.top,L=E.right,R=E.bottom,P=E.left;if("if-needed"===r&&y>=0&&I>=0&&S<=p&&x<=h&&y>=T&&S<=R&&I>=P&&x<=L)return C;var A=getComputedStyle(z),V=parseInt(A.borderLeftWidth,10),D=parseInt(A.borderTopWidth,10),N=parseInt(A.borderRightWidth,10),B=parseInt(A.borderBottomWidth,10),H=0,K=0,G="offsetWidth"in z?z.offsetWidth-z.clientWidth-V-N:0,$="offsetHeight"in z?z.offsetHeight-z.clientHeight-D-B:0;if(c===z)H="start"===i?O:"end"===i?O-p:"nearest"===i?F(m,m+p,p,D,B,m+O,m+O+v,v):O-p/2,K="start"===o?w:"center"===o?w-h/2:"end"===o?w-h:F(f,f+h,h,V,N,f+w,f+w+b,b),H=Math.max(0,H+m),K=Math.max(0,K+f);else{H="start"===i?O-T-D:"end"===i?O-R+B+$:"nearest"===i?F(T,R,M,D,B+$,O,O+v,v):O-(T+M/2)+$/2,K="start"===o?w-P-V:"center"===o?w-(P+k/2)+G/2:"end"===o?w-L+N+G:F(P,L,k,V,N+G,w,w+b,b);var U=z.scrollLeft,Y=z.scrollTop;O+=Y-(H=Math.max(0,Math.min(Y+H,z.scrollHeight-M+$))),w+=U-(K=Math.max(0,Math.min(U+K,z.scrollWidth-k+G)))}C.push({el:z,top:H,left:K})}return C}(e,{boundary:t,block:"nearest",scrollMode:"if-needed"});n.forEach(({el:e,top:t,left:n})=>{e.scrollTop=t,e.scrollLeft=n})}(t.current,n.current)},ee=e=>`${e.charAt(0).toUpperCase()}${e.substring(1)}`,te=(e,t="")=>`${t}${null==e?void 0:e.value}`,ne=e=>"string"==typeof e?{value:e,label:ee(e)}:e,re=e=>e.length>1e4?1e3:e.length>1e3?200:0,ie=(e,t,n)=>e.filter(e=>(n(e).label||n(e).value).toString().toLowerCase().includes(t.toString().toLowerCase())).sort(e=>n(e).value.toString().toLowerCase().indexOf(t.toString().toLowerCase()));function oe(e,t,n){return n?D({},e,"function"==typeof t?{[n]:t(e[n])}:{[n]:t}):"function"==typeof t?t(e):t}var le;!function(e){e.List="list",e.Input="input",e.Both="both"}(le||(le={}));const[se,ae]=m({strict:!1,name:"SelectContext"}),[ce,ue]=m({strict:!1,name:"SelectInputContext"}),[de,he]=m({strict:!1,name:"SelectedContext"}),[pe,fe]=m({strict:!1,name:"SelectedListContext"}),[me,ge]=m({strict:!1,name:"SelectActionContext"}),[ve,be]=m({strict:!1,name:"SelectIdContext"});function ye({create:e=!1,single:n=!1,selectionVisibleIn:r=le.Input,getDebounce:i=re,getOption:o=ne,stateReducer:l=Q,filterFn:s=ie,scrollToIndex:a=Z,shiftAmount:c=5,duplicates:u,options:d,value:h,onChange:p,placement:f="bottom-start",placeholder:m,searchPlaceholder:g}){const[{searchValue:v,resolvedSearchValue:O,isOpen:w,highlightedIndex:C},_]=function(e,t){const n=b();n.current=t;const[r,i]=I(e);return[r,x((e,t)=>{if(!t)throw new Error("An action type is required to update the state");return i(r=>n.current(r,e(r),t))},[i])]}(J,l),z=!n,E=z&&!!(Array.isArray(h)?h.length>0:h),M=b(),k=b([]),T=b(""),L=b(),R=b(),P=b({}),A=b(),V=b(),j=b(),B=b(C),W=b(),F=b(!1),$=t({placement:f});B.current=C,V.current=s,j.current=a,A.current=p,z&&void 0===h&&(h=X),d||(d=q);const ee=d;d=y(()=>{var e,t;return r!==le.Input?null==(e=d)?void 0:e.map(e=>{var t;return D({},o(e),{selected:null==(t=Array.isArray(h)?h:[h||""])?void 0:t.some(t=>o(t).value===o(e).value)})}):z&&!u?null==(t=d)?void 0:t.filter(e=>{var t;return!(null!=(t=h)&&t.some(t=>o(t).value===o(e).value))}):d},[d,h,u,z,o,r]);const te=y(()=>z?h.map(e=>ee.find(t=>o(t).value===o(e).value)||o(e)):ee.find(e=>o(e).value===o(h).value)||o(h),[z,h,ee,o]);d=y(()=>O?null==V.current?void 0:V.current(d,O,o):d,[d,O,o]),d=y(()=>e&&v?[D({created:!0},o(v)),...d]:d,[e,v,d,o]),T.current=h,k.current=d;const se=x(e=>{_(t=>oe(t,e,"isOpen"),Y.SetOpen)},[]),ae=x(()=>{se(!1)},[]),ce=x(()=>{se(!0)},[]),ue=function(e,t=0){const n=b(null),r=b();return r.current=e,S(()=>()=>{clearTimeout(n.current)},[t]),x(async(...e)=>(n.current&&clearTimeout(n.current),new Promise((i,o)=>{n.current=setTimeout(()=>{n.current=null;try{i(r.current(...e))}catch(e){o(e)}},t)})),[t])}(e=>{_(t=>oe(t,e,"resolvedSearchValue"),Y.SetSearch)},i(d)),de=x(e=>{_(t=>oe(t,e,"searchValue"),Y.SetSearch),ue(e)},[]),he=x(e=>{const t=k.current;_(n=>D({},n,{highlightedIndex:Math.min(Math.max(0,"function"==typeof e?e(n.highlightedIndex):e),t.length-1)}),Y.HighlightIndex)},[]),pe=x(t=>{const n=k.current[t];if(n){const e=o(n);if(z){const t=T.current;!u&&t.some(t=>o(t).value===e.value)||null==A.current||A.current([...t,e],{action:e.created?U.MultiCreate:U.MultiSelect,value:e})}else null==A.current||A.current(e.value,{action:e.created?U.SingleCreate:U.SingleSelect,value:e})}(e||z)&&de(""),z||ae()},[z,e,u,o]),fe=x(()=>{null==A.current||A.current(z?[]:"",{action:z?U.MultiClear:U.SingleClear,value:""})},[z]),me=x(e=>{const t="number"==typeof e,n=Array.isArray(T.current),r=n?T.current:[T.current],i=r.filter((n,r)=>t?r!==e:o(e).value!==o(n).value);n?A.current(i,{action:U.MultiRemove,value:o(t?r[e]:e).value}):A.current(i[0]||"",{action:U.SingleRemove,value:o(t?r[e]:e).value})},[o]),ge=x(e=>{de(e.target.value),ce()},[]),ve=x(()=>{e&&!z||de(""),ce()},[e,z]),be=(e,t)=>({shift:n,meta:r},i)=>{i.preventDefault();const o=t||r?1e12:e||n?c-1:1;ce(),F.current=!0,he(e=>e-o)},ye=(e,t)=>({shift:n,meta:r},i)=>{i.preventDefault();const o=t||r?1e12:e||n?c-1:1;ce(),F.current=!0,he(e=>e+o)},xe=x((e,t)=>{if(w){const e=k.current;(v||e[B.current])&&t.preventDefault(),e[B.current]&&pe(B.current)}},[w,v]),Se=x(()=>{const e=T.current,t=z?e[e.length-1]:e;(z&&!v||!z&&t)&&(me(t),de(""))},[v,z]),Ie=(Oe={ArrowUp:be(),ArrowDown:ye(),PageUp:be(!0),PageDown:ye(!0),Home:be(!1,!0),End:ye(!1,!0),Escape:ae,Tab:ae,Enter:xe,Backspace:Se},(e={})=>{let{onKeyDown:t}=e;return D({},N(e,H),{onKeyDown:e=>{const{keyCode:n,key:r,shiftKey:i,metaKey:o}=e,l=Oe[r]||Oe[n];l&&l({keyCode:n,key:r,shift:i,meta:o},e),t&&t(e)}})});var Oe;const we=x((e={})=>{let{refKey:t="ref",ref:n,onChange:r,onFocus:i,onClick:o,onBlur:l}=e,s=N(e,K);return Ie(D({[t]:e=>{L.current=e,n&&(n.current=e)},value:(w?v||te.label:te?null==te?void 0:te.label:"")||"",placeholder:E&&!v?g:null!=te&&te.label?void 0:m,onChange:e=>{ge(e),r&&r(e)},onFocus:e=>{ve(),i&&i(e)},onClick:e=>{ve(),o&&o(e)},onBlur:e=>{l&&(e.persist(),P.current.cb=l,P.current.event=e)}},s))},[w,v,te,ve,ge,m,g,E]),Ce=x((e={})=>{let{index:t,key:n=t,onClick:r,onMouseEnter:i,option:o}=e,l=N(e,G);if("number"!=typeof t||t<0)throw new Error("useSelect: The getOptionProps prop getter requires an index property, eg. 'getOptionProps({index: 1})'");return D({key:n,option:o},l,{onClick:e=>{void 0!==o.selected&&o.selected?me(o.value):pe(t),r&&r(e)},onMouseEnter:e=>{F.current=!1,he(t),i&&i(e)}})},[]);return function(e,t,n,r){const i=b(),o=b(),l=b();l.current=t;const s=n||i,a=r||o,c=x(e=>{if("click"===e.type&&"touchstart"===e.type)return;const t=a.current,n=s.current;null!=t&&t.contains(e.target)||null!=n&&n.contains(e.target)||l.current(e)},[]);S(()=>(e&&(document.addEventListener("touchstart",c,!0),document.addEventListener("click",c,!0)),()=>{document.removeEventListener("touchstart",c,!0),document.removeEventListener("click",c,!0)}),[e,c])}(w,ae,M,R),S(()=>{v&&he(0)},[v,he]),S(()=>{var e,t;he(0),!w&&null!=(e=P.current)&&e.event&&(null==(t=P.current)||t.cb(P.current.event),P.current.event=null)},[w]),S(()=>{null==j.current||j.current(C,W,M,F)},[C]),S(()=>{w&&L.current&&setTimeout(()=>{var e;null==(e=L.current)||e.focus()})},[w]),{multi:z,clearable:E,clearAll:fe,optionsRef:M,controlRef:R,popper:$,value:h,searchValue:v,isOpen:w,highlightedIndexRef:B,highlightedValueRef:W,enableScrollRef:F,selectedOption:te,visibleOptions:d,selectionVisibleIn:r,selectIndex:pe,removeValue:me,setOpen:se,setSearch:de,highlightIndex:he,getInputProps:we,getOptionProps:Ce,getOption:o}}function xe(e={}){const{clearAll:t,clearable:r}=ge(),i=n(),o=x(e=>{e.preventDefault(),e.stopPropagation(),t()},[]);return D({},e,{clearOnClick:o,clearable:r,__css:i.actionGroup})}function Se(e={}){const{selectLabelId:t,selectInputId:i}=be(),{getInputProps:o}=ue(),{fontSize:l}=r("Input",e).field||{},s=n();return D({},e,o(),{__css:D({fontSize:l},s.input),id:i,"aria-labelledby":t})}function Ie(e={}){const{selectLabelId:t,selectInputId:i}=be();return D({},e,{__css:D({},r("FormLabel",e)||{},n().label),id:t,htmlFor:i})}function Oe(e={}){var t;const{isOpen:r,setOpen:i}=ge(),o=x(e=>{e.preventDefault(),e.stopPropagation(),i(e=>!e)},[i]),l=n();return D({},e,{__css:D({},l.button,null==(t=r&&l.button)?void 0:t._active),isOpen:r,onClick:o})}function we(e={}){return D({},e,{__css:D({},n().button)})}function Ce(e={}){const{removeValue:t}=he(),r=n(),i=x(()=>t(e.value),[e.value]);return y(()=>({key:e.key||e.value,onClick:i,__css:r.selectedItem,value:e.value,label:e.label||ee(e.value)}),[e.value,e.label,e.key,i,r.selectedItem])}function _e(e={}){let{selected:t}=e,r=N(e,$);const{getOptionProps:i,highlightedIndexRef:o,highlightedValueRef:l,multi:s}=ae(),a=n(),c=o.current===r.index;return y(()=>{var e,n;const o={value:r.value,label:r.label||ee(r.value),selected:t};return D({},i({option:o,key:r.key||te(o),index:r.index}),{multi:s,highlightedRef:c?l:void 0,__css:D({},a.item,null==(e=t&&a.item)?void 0:e._selected,null==(n=c&&a.item)?void 0:n._active)})},[c,t,r.key,r.label,r.value,r.index,a.item,s])}function ze(){const{isOpen:e,getOption:t,optionsRef:r,popper:i,visibleOptions:o,multi:l}=ae(),s=n();return y(()=>({ref:g(r,i.popperRef),optionsRef:r,isOpen:e,visibleOptions:o,getOption:t,__css:s.list,"aria-multiselectable":l,"aria-hidden":!e}),[e,o,s.list,l])}function Ee(e={}){const{visibleOptions:t,getOption:r}=ae(),{value:i,multi:o,selectionVisibleIn:l}=fe(),s=n();return D({},e,{multi:o,selectedItems:y(()=>i&&Array.isArray(i)?i.map(e=>r(e)):[],[i,t]),selectionVisibleIn:l,__css:s.selectedList,textList:{__css:s.textList}})}function Me(e={}){var t;const{isOpen:i,popper:o,controlRef:l}=ae(),s=r("Input",e)||{},a=n();return D({},e,y(()=>({ref:g(e.ref,l,o.referenceRef)}),[e.ref,l,o.referenceRef]),{isOpen:i,__css:D({},a.field,a.control,{_focusWithin:null==(t=s.field)?void 0:t._focusVisible})})}const ke=(e=21)=>{const t="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ-_";let n="";for(let r=0;r<e;r++)n+=t[Math.floor(Math.random()*t.length)];return n};function Te(){const e=b();return e.current||(e.current=ke()),e.current}function Le(e={}){const t=e.getOption||ne,[n,r]=I(e.value),[i,o]=I(()=>e.options.map(t));return{value:n,options:i,onChange:x((e,n)=>{switch(null==n?void 0:n.action){case U.SingleCreate:r(e),o(n=>{const r=t(e);return n.some(e=>t(e).value===r.value)?n:[D({},r,{created:!0}),...n]});break;case U.SingleClear:case U.SingleRemove:case U.SingleSelect:r(e);break;case U.MultiCreate:const n=e[e.length-1];r(e),o(e=>{const r=t(n);return e.some(e=>t(e).value===r.value)?e:[D({},r,{created:!0}),...e]});break;default:r(e)}},[r,o,t])}}function Re(){return Re=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Re.apply(this,arguments)}function Pe(){return Pe=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Pe.apply(this,arguments)}function Ae(e,t,n){var r,i,o=null!=(r=n.initialDeps)?r:[];return function(){var r;n.key&&null!=n.debug&&n.debug()&&(r=Date.now());var l,s=e();if(s.length===o.length&&!s.some(function(e,t){return o[t]!==e}))return i;if(o=s,n.key&&null!=n.debug&&n.debug()&&(l=Date.now()),i=t.apply(void 0,s),n.key&&null!=n.debug&&n.debug()){var a=Math.round(100*(Date.now()-r))/100,c=Math.round(100*(Date.now()-l))/100,u=c/16,d=function(e,t){for(e=String(e);e.length<t;)e=" "+e;return e};console.info("%câ± "+d(c,5)+" /"+d(a,5)+" ms","\n            font-size: .6rem;\n            font-weight: bold;\n            color: hsl("+Math.max(0,Math.min(120-120*u,120))+"deg 100% 31%);",null==n?void 0:n.key)}return null==n||null==n.onChange||n.onChange(i),i}}function Ve(e,t){if(void 0===e)throw new Error("Unexpected undefined"+(t?": "+t:""));return e}var De=function(e){return e},Ne=function(e){for(var t=Math.max(e.startIndex-e.overscan,0),n=Math.min(e.endIndex+e.overscan,e.count-1),r=[],i=t;i<=n;i++)r.push(i);return r},je=function(e,t){var n=e.scrollElement;if(n){var r=function(e){var n=e.height;t({width:Math.round(e.width),height:Math.round(n)})};r(n.getBoundingClientRect());var i=new ResizeObserver(function(e){var t=e[0];if(null!=t&&t.borderBoxSize){var i=t.borderBoxSize[0];if(i)return void r({width:i.inlineSize,height:i.blockSize})}r(n.getBoundingClientRect())});return i.observe(n,{box:"border-box"}),function(){i.unobserve(n)}}},Be=function(e,t){var n=e.scrollElement;if(n){var r=function(){t(n[e.options.horizontal?"scrollLeft":"scrollTop"])};return r(),n.addEventListener("scroll",r,{passive:!0}),function(){n.removeEventListener("scroll",r)}}},We=function(e,t,n){if(null!=t&&t.borderBoxSize){var r=t.borderBoxSize[0];if(r)return Math.round(r[n.options.horizontal?"inlineSize":"blockSize"])}return Math.round(e.getBoundingClientRect()[n.options.horizontal?"width":"height"])},Fe=function(e,t,n){var r,i,o=t.adjustments,l=t.behavior;null==(r=n.scrollElement)||null==r.scrollTo||r.scrollTo(((i={})[n.options.horizontal?"left":"top"]=e+(void 0===o?0:o),i.behavior=l,i))},He=function(e){var t,n,r=this;this.unsubs=[],this.scrollElement=null,this.isScrolling=!1,this.isScrollingTimeoutId=null,this.scrollToIndexTimeoutId=null,this.measurementsCache=[],this.itemSizeCache=new Map,this.pendingMeasuredCacheIndexes=[],this.scrollDirection=null,this.scrollAdjustments=0,this.measureElementCache=new Map,this.observer=(t=null,n=function(){return t||("undefined"!=typeof ResizeObserver?t=new ResizeObserver(function(e){e.forEach(function(e){r._measureElement(e.target,e)})}):null)},{disconnect:function(){var e;return null==(e=n())?void 0:e.disconnect()},observe:function(e){var t;return null==(t=n())?void 0:t.observe(e,{box:"border-box"})},unobserve:function(e){var t;return null==(t=n())?void 0:t.unobserve(e)}}),this.range={startIndex:0,endIndex:0},this.setOptions=function(e){Object.entries(e).forEach(function(t){void 0===t[1]&&delete e[t[0]]}),r.options=Pe({debug:!1,initialOffset:0,overscan:1,paddingStart:0,paddingEnd:0,scrollPaddingStart:0,scrollPaddingEnd:0,horizontal:!1,getItemKey:De,rangeExtractor:Ne,onChange:function(){},measureElement:We,initialRect:{width:0,height:0},scrollMargin:0,scrollingDelay:150,indexAttribute:"data-index",initialMeasurementsCache:[],lanes:1},e)},this.notify=function(){null==r.options.onChange||r.options.onChange(r)},this.cleanup=function(){r.unsubs.filter(Boolean).forEach(function(e){return e()}),r.unsubs=[],r.scrollElement=null},this._didMount=function(){return r.measureElementCache.forEach(r.observer.observe),function(){r.observer.disconnect(),r.cleanup()}},this._willUpdate=function(){var e=r.options.getScrollElement();r.scrollElement!==e&&(r.cleanup(),r.scrollElement=e,r._scrollToOffset(r.scrollOffset,{adjustments:void 0,behavior:void 0}),r.unsubs.push(r.options.observeElementRect(r,function(e){var t=r.scrollRect;r.scrollRect=e,(r.options.horizontal?e.width!==t.width:e.height!==t.height)&&r.maybeNotify()})),r.unsubs.push(r.options.observeElementOffset(r,function(e){r.scrollAdjustments=0,r.scrollOffset!==e&&(null!==r.isScrollingTimeoutId&&(clearTimeout(r.isScrollingTimeoutId),r.isScrollingTimeoutId=null),r.isScrolling=!0,r.scrollDirection=r.scrollOffset<e?"forward":"backward",r.scrollOffset=e,r.maybeNotify(),r.isScrollingTimeoutId=setTimeout(function(){r.isScrollingTimeoutId=null,r.isScrolling=!1,r.scrollDirection=null,r.maybeNotify()},r.options.scrollingDelay))})))},this.getSize=function(){return r.scrollRect[r.options.horizontal?"width":"height"]},this.memoOptions=Ae(function(){return[r.options.count,r.options.paddingStart,r.options.scrollMargin,r.options.getItemKey]},function(e,t,n,i){return r.pendingMeasuredCacheIndexes=[],{count:e,paddingStart:t,scrollMargin:n,getItemKey:i}},{key:!1}),this.getFurthestMeasurement=function(e,t){for(var n=new Map,i=new Map,o=t-1;o>=0;o--){var l=e[o];if(!n.has(l.lane)){var s=i.get(l.lane);if(null==s||l.end>s.end?i.set(l.lane,l):l.end<s.end&&n.set(l.lane,!0),n.size===r.options.lanes)break}}return i.size===r.options.lanes?Array.from(i.values()).sort(function(e,t){return e.end-t.end})[0]:void 0},this.getMeasurements=Ae(function(){return[r.memoOptions(),r.itemSizeCache]},function(e,t){var n=e.count,i=e.paddingStart,o=e.scrollMargin,l=e.getItemKey,s=r.pendingMeasuredCacheIndexes.length>0?Math.min.apply(Math,r.pendingMeasuredCacheIndexes):0;r.pendingMeasuredCacheIndexes=[];for(var a=r.measurementsCache.slice(0,s),c=s;c<n;c++){var u=l(c),d=1===r.options.lanes?a[c-1]:r.getFurthestMeasurement(a,c),h=d?d.end:i+o,p=t.get(u),f="number"==typeof p?p:r.options.estimateSize(c);a[c]={index:c,start:h,size:f,end:h+f,key:u,lane:d?d.lane:c%r.options.lanes}}return r.measurementsCache=a,a},{key:"production"!==process.env.NODE_ENV&&"getMeasurements",debug:function(){return r.options.debug}}),this.calculateRange=Ae(function(){return[r.getMeasurements(),r.getSize(),r.scrollOffset]},function(e,t,n){return r.range=function(e){for(var t=e.measurements,n=e.outerSize,r=e.scrollOffset,i=t.length-1,o=Ke(0,i,function(e){return t[e].start},r),l=o;l<i&&t[l].end<r+n;)l++;return{startIndex:o,endIndex:l}}({measurements:e,outerSize:t,scrollOffset:n})},{key:"production"!==process.env.NODE_ENV&&"calculateRange",debug:function(){return r.options.debug}}),this.maybeNotify=Ae(function(){var e=r.calculateRange();return[e.startIndex,e.endIndex,r.isScrolling]},function(){r.notify()},{key:"production"!==process.env.NODE_ENV&&"maybeNotify",debug:function(){return r.options.debug},initialDeps:[this.range.startIndex,this.range.endIndex,this.isScrolling]}),this.getIndexes=Ae(function(){return[r.options.rangeExtractor,r.calculateRange(),r.options.overscan,r.options.count]},function(e,t,n,r){return e(Pe({},t,{overscan:n,count:r}))},{key:"production"!==process.env.NODE_ENV&&"getIndexes",debug:function(){return r.options.debug}}),this.indexFromElement=function(e){var t=r.options.indexAttribute,n=e.getAttribute(t);return n?parseInt(n,10):(console.warn("Missing attribute name '"+t+"={index}' on measured element."),-1)},this._measureElement=function(e,t){var n,i=r.indexFromElement(e),o=r.measurementsCache[i];if(o){var l=r.measureElementCache.get(o.key);if(!e.isConnected)return r.observer.unobserve(e),void(e===l&&r.measureElementCache.delete(o.key));l!==e&&(l&&r.observer.unobserve(l),r.observer.observe(e),r.measureElementCache.set(o.key,e));var s=r.options.measureElement(e,t,r),a=s-(null!=(n=r.itemSizeCache.get(o.key))?n:o.size);0!==a&&(o.start<r.scrollOffset&&("production"!==process.env.NODE_ENV&&r.options.debug&&console.info("correction",a),r._scrollToOffset(r.scrollOffset,{adjustments:r.scrollAdjustments+=a,behavior:void 0})),r.pendingMeasuredCacheIndexes.push(i),r.itemSizeCache=new Map(r.itemSizeCache.set(o.key,s)),r.notify())}},this.measureElement=function(e){e&&r._measureElement(e,void 0)},this.getVirtualItems=Ae(function(){return[r.getIndexes(),r.getMeasurements()]},function(e,t){for(var n=[],r=0,i=e.length;r<i;r++)n.push(t[e[r]]);return n},{key:"production"!==process.env.NODE_ENV&&"getIndexes",debug:function(){return r.options.debug}}),this.getVirtualItemForOffset=function(e){var t=r.getMeasurements();return Ve(t[Ke(0,t.length-1,function(e){return Ve(t[e]).start},e)])},this.getOffsetForAlignment=function(e,t){var n=r.getSize();"auto"===t&&(t=e<=r.scrollOffset?"start":e>=r.scrollOffset+n?"end":"start"),"start"===t||("end"===t?e-=n:"center"===t&&(e-=n/2));var i=r.options.horizontal?"scrollWidth":"scrollHeight",o=(r.scrollElement?"document"in r.scrollElement?r.scrollElement.document.documentElement[i]:r.scrollElement[i]:0)-r.getSize();return Math.max(Math.min(o,e),0)},this.getOffsetForIndex=function(e,t){void 0===t&&(t="auto"),e=Math.max(0,Math.min(e,r.options.count-1));var n=Ve(r.getMeasurements()[e]);if("auto"===t)if(n.end>=r.scrollOffset+r.getSize()-r.options.scrollPaddingEnd)t="end";else{if(!(n.start<=r.scrollOffset+r.options.scrollPaddingStart))return[r.scrollOffset,t];t="start"}return[r.getOffsetForAlignment("end"===t?n.end+r.options.scrollPaddingEnd:n.start-r.options.scrollPaddingStart,t),t]},this.isDynamicMode=function(){return r.measureElementCache.size>0},this.cancelScrollToIndex=function(){null!==r.scrollToIndexTimeoutId&&(clearTimeout(r.scrollToIndexTimeoutId),r.scrollToIndexTimeoutId=null)},this.scrollToOffset=function(e,t){var n=void 0===t?{}:t,i=n.align,o=void 0===i?"start":i,l=n.behavior;r.cancelScrollToIndex(),"smooth"===l&&r.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),r._scrollToOffset(r.getOffsetForAlignment(e,o),{adjustments:void 0,behavior:l})},this.scrollToIndex=function(e,t){var n=void 0===t?{}:t,i=n.align,o=void 0===i?"auto":i,l=n.behavior;e=Math.max(0,Math.min(e,r.options.count-1)),r.cancelScrollToIndex(),"smooth"===l&&r.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size.");var s=r.getOffsetForIndex(e,o),a=s[1];r._scrollToOffset(s[0],{adjustments:void 0,behavior:l}),"smooth"!==l&&r.isDynamicMode()&&(r.scrollToIndexTimeoutId=setTimeout(function(){if(r.scrollToIndexTimeoutId=null,r.measureElementCache.has(r.options.getItemKey(e))){var t=r.getOffsetForIndex(e,a);Math.abs(t[0]-r.scrollOffset)<1||r.scrollToIndex(e,{align:a,behavior:l})}else r.scrollToIndex(e,{align:a,behavior:l})}))},this.scrollBy=function(e,t){var n=(void 0===t?{}:t).behavior;r.cancelScrollToIndex(),"smooth"===n&&r.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),r._scrollToOffset(r.scrollOffset+e,{adjustments:void 0,behavior:n})},this.getTotalSize=function(){var e;return((null==(e=r.getMeasurements()[r.options.count-1])?void 0:e.end)||r.options.paddingStart)-r.options.scrollMargin+r.options.paddingEnd},this._scrollToOffset=function(e,t){r.options.scrollToFn(e,{behavior:t.behavior,adjustments:t.adjustments},r)},this.measure=function(){r.itemSizeCache=new Map,r.notify()},this.setOptions(e),this.scrollRect=this.options.initialRect,this.scrollOffset=this.options.initialOffset,this.measurementsCache=this.options.initialMeasurementsCache,this.measurementsCache.forEach(function(e){r.itemSizeCache.set(e.key,e.size)}),this.maybeNotify()},Ke=function(e,t,n,r){for(;e<=t;){var i=(e+t)/2|0,o=n(i);if(o<r)e=i+1;else{if(!(o>r))return i;t=i-1}}return e>0?e-1:0},Ge="undefined"!=typeof document?v.useLayoutEffect:v.useEffect;const $e=["value","label","index","selected","created"],Ue=["highlightedRef","option","multi"],Ye=["index","size","start","item","optionItemProps"],Xe=["__css","visibleOptions","isOpen","getOption","ref","optionsRef"],qe=["isActive","width","height","__css"],Je=["width","height"],Qe=["value","label"],Ze=["onClick","__css","value","label"],et=["__css","size","ariaLabel","icon","isOpen"],tt=["__css","size","ariaLabel","icon"],nt=["children"],rt=["__css","textList","selectedItems","multi","selectionVisibleIn"],it=["__css","clearable","clearOnClick","clearButtonProps","toggleButtonProps"],ot=["children"],lt=["label","labelProps","controlProps","listProps","selectedListProps","actionGroupProps","size"],st=i("svg"),at=O(e=>{const{children:t}=e,n=r("MultiSelect",e),s=o(e),a=Te(),c=Te(),u=y(()=>({selectLabelId:a,selectInputId:c}),[]),d=ye(s),h=y(()=>d,[d]),p=y(()=>({getInputProps:d.getInputProps}),[d.getInputProps]),f=y(()=>({removeValue:d.removeValue}),[d.removeValue]),m=y(()=>({value:d.value,multi:d.multi,selectionVisibleIn:d.selectionVisibleIn}),[d.value,d.multi,d.selectionVisibleIn]),g=y(()=>({isOpen:d.isOpen,setOpen:d.setOpen,clearable:d.clearable,clearAll:d.clearAll}),[d.isOpen,d.setOpen,d.clearable,d.clearAll]);return w(l,{value:n,children:w(ve,{value:u,children:w(se,{value:h,children:w(ce,{value:p,children:w(pe,{value:m,children:w(de,{value:f,children:w(me,{value:g,children:w(i.div,{pos:"relative",display:"flex",flexDirection:"column",children:t})})})})})})})})});at.displayName="Select";const ct=O(e=>{const t=Ie(e);return w(i.label,D({},e,t))});ct.displayName="SelectLabel";const ut=O(({label:e,created:t})=>C(s,{justifyContent:"space-between",w:"full",children:[w(a,{children:e}),!!t&&w(c,{flexShrink:0,children:w(u,{fontSize:"xs",fontWeight:"bold",children:"New"})})]}));ut.displayName="SelectOptionLabel";const dt=O(e=>{let{value:t,label:n,index:r,selected:o,created:l}=e,s=N(e,$e);const a=_e({value:t,label:n,index:r,selected:o}),{highlightedRef:c,option:u,multi:d}=a,h=N(a,Ue);return w(i.li,D({ref:c&&c,role:"option"},(o||d)&&{"aria-selected":!!o},s,h,{children:w(ut,{label:(null==u?void 0:u.label)||t,created:!!l})}))});dt.displayName="SelectOptionItem";const ht=O(e=>{let{index:t,size:n,start:r,item:i,optionItemProps:o}=e,l=N(e,Ye);return w(dt,D({},o(i.value,t),{style:{position:"absolute",top:0,left:0,width:"100%",height:`${n}px`,transform:`translateY(${r}px)`},selected:i.selected,created:i.created,label:i.label},l))});ht.displayName="SelectOptionVirtualItem";const pt=O(({label:e="No results found"})=>{const t=n();return w(i.li,{__css:t.item,children:w(ut,{label:e})})});pt.displayName="EmptySelectResults";const ft=O(e=>{const t=ze(),{__css:n,visibleOptions:r,isOpen:o,getOption:l,ref:s,optionsRef:a}=t,c=N(t,Xe),u=o,d=x((e,t)=>{const n=l(e);return{key:n.id||te(n,"option-"),value:n.value,label:n.label||ee(n.value),selected:n.selected,created:n.created,index:t}},[]),h=y(()=>"lg"===e.size?43:"sm"===e.size?29:40,[e.size]),p=(f=Re({observeElementRect:je,observeElementOffset:Be,scrollToFn:Fe},{count:r.length,getScrollElement:()=>a.current,estimateSize:()=>h}),m=v.useReducer(function(){return{}},{})[1],g=Re({},f,{onChange:function(e){m(),null==f.onChange||f.onChange(e)}}),(b=v.useState(function(){return new He(g)})[0]).setOptions(g),v.useEffect(function(){return b._didMount()},[]),Ge(function(){return b._willUpdate()}),b);var f,m,g,b;return w(i.ul,D({ref:s,__css:y(()=>D({listStyle:"none",position:"absolute"},!u&&{display:"none"},n),[u,n]),"aria-orientation":"vertical",role:"listbox"},c,e,{children:u&&r.length>0?w("div",{style:{height:`${p.getTotalSize()}px`,width:"100%",position:"relative"},children:p.getVirtualItems().map(e=>w(ht,{optionItemProps:d,item:r[e.index],index:e.index,size:e.size,start:e.start},e.key))}):u?w(pt,{}):null}))});ft.displayName="SelectList";const mt=e=>{let{isActive:t,width:n=4,height:r=4,__css:i}=e,o=N(e,qe);return w(st,D({viewBox:"0 0 24 24",stroke:"currentColor",fill:"none",width:n,height:r,__css:D({},i,t&&(null==i?void 0:i._active))},o,{children:w("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 9l-7 7-7-7"})}))},gt=e=>{let{width:t=4,height:n=4}=e,r=N(e,Je);return w(st,D({viewBox:"0 0 24 24",stroke:"currentColor",fill:"none",width:t,height:n},r,{children:w("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z"})}))},vt=O(e=>{const t=Se(e);return w(i.input,D({},t))});vt.displayName="SelectInput";const bt=O(e=>{let{value:t,label:n}=e,r=N(e,Qe);const i=Ce(D({value:t,label:n||"",key:r.key||""},r)),{onClick:o,__css:l,value:s,label:a}=i,h=N(i,Ze);return C(c,D({size:r.size},{sm:{fontSize:"sm"},md:{fontSize:"md"},lg:{fontSize:"lg"}}[r.size||"md"]||{},l,h,{role:"listitem",children:[w(u,{children:a||s}),w(d,{onClick:o})]}))});bt.displayName="SelectedItem";const yt=O(e=>{const t=Oe(e),{__css:n,size:r="sm",ariaLabel:i="toggle menu",icon:o=mt,isOpen:l}=t,s=N(t,et),a={sm:{height:"6",width:"6"},md:{height:"8",width:"8"},lg:{height:"10",width:"10"}}[r]||{};return w(h,D({tabIndex:0,size:r,"aria-label":i,"aria-haspopup":!0,"aria-expanded":l,icon:w(o,{isActive:l,__css:{transitionDuration:"200ms",transitionProperty:"transform",_active:{transform:"rotate(180deg)"}}}),minWidth:0},a,n,s))});yt.displayName="SelectToggleButton";const xt=O(e=>{const t=we(e),{__css:n,size:r="sm",ariaLabel:i="clear all selected",icon:o=gt}=t,l=N(t,tt),s={sm:{height:"6",width:"6"},md:{height:"8",width:"8"},lg:{height:"10",width:"10"}}[r]||{};return w(h,D({tabIndex:0,size:r,"aria-label":i,icon:w(o,{}),minWidth:0},s,n,l))});xt.displayName="SelectClearButton";const St=O(e=>{let{children:t}=e,n=N(e,nt);const r=Ee(n),{__css:i,textList:o,selectedItems:l,multi:s,selectionVisibleIn:c}=r,u=N(r,rt),d=s&&c!==le.List,h=s&&c===le.List;return C(a,D({},i,u,d?{role:"list"}:null,{children:[d&&(null==l?void 0:l.map(e=>w(bt,{size:n.size,value:e.value,label:e.label},`selected-item-${e.value}`))),h&&!(null==l||!l.length)&&w(a,D({"aria-current":"true"},null==o?void 0:o.__css,{children:null==l?void 0:l.map(({label:e})=>e).join(", ")})),t]}))});St.displayName="SelectedList";const It=O(e=>{const t=xe(e),{__css:n,clearable:r,clearOnClick:i,clearButtonProps:o,toggleButtonProps:l}=t,a=N(t,it);return C(s,D({},n,a,{children:[r&&w(xt,D({size:e.size,onClick:i},o)),w(yt,D({size:e.size},l))]}))});It.displayName="SelectActionGroup";const Ot=p((e,t)=>{let{children:n}=e,r=N(e,ot);const{ref:i,__css:o}=Me({ref:t});return w(f,D({ref:i,as:s},o,r,{children:n}))}),wt=e=>{let{label:t,labelProps:n,controlProps:r,listProps:i,selectedListProps:o,actionGroupProps:l,size:s="md"}=e,a=N(e,lt);return C(at,D({size:s},a,{children:[t&&w(ct,D({size:s},n,{children:t})),C(Ot,D({size:s},r,{children:[w(St,D({size:s},o,{children:w(vt,{size:s})})),w(It,D({size:s},l))]})),w(ft,D({size:s},i))]}))};export{st as ChakraSvg,U as ChangeActions,pt as EmptySelectResults,wt as MultiSelect,V as MultiSelectTheme,at as Select,It as SelectActionGroup,me as SelectActionProvider,Y as SelectActions,xt as SelectClearButton,Ot as SelectControl,ve as SelectIdProvider,vt as SelectInput,ce as SelectInputProvider,ct as SelectLabel,ft as SelectList,dt as SelectOptionItem,ut as SelectOptionLabel,ht as SelectOptionVirtualItem,se as SelectProvider,yt as SelectToggleButton,bt as SelectedItem,St as SelectedList,pe as SelectedListProvider,de as SelectedProvider,le as SelectionVisibilityMode,te as idFromOption,ee as labelFromValue,ke as uid,we as useClearButton,Te as useId,Le as useMultiSelect,ye as useSelect,ge as useSelectActionContext,xe as useSelectActionGroup,Oe as useSelectButton,ae as useSelectContext,Me as useSelectControl,be as useSelectIdContext,Se as useSelectInput,ue as useSelectInputContext,_e as useSelectItem,Ie as useSelectLabel,ze as useSelectList,he as useSelectedContext,Ce as useSelectedItem,Ee as useSelectedList,fe as useSelectedListContext};
//# sourceMappingURL=index.modern.mjs.map
